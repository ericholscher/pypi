<?xml version="1.0" encoding="utf-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
    metal:use-macro="standard_template/macros/page"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
>
<metal:slot fill-slot="body">

<!-- selected categories -->
<span tal:condition="not: data/selected_categories">
  <p>There are <span tal:replace="data/packages_count"/> packages in the cheese shop.</p>
</span>
<span tal:condition="data/selected_categories">
  <p>There are <span tal:replace="data/packages_count"/> packages in the categories you have selected:</p>
  <ul>
  <li tal:repeat="category data/selected_categories">
    <strong tal:content="category/path">Category :: Subcategory</strong>
    [<a tal:attributes="href category/ignore_url">ignore</a>]
  </li>
  </ul>
</span>

<!-- packages -->
<span tal:condition="not: data/show_packages">
  <p>Continue selecting categories from below, or
     <a tal:attributes="href data/show_packages_url">show all of the matching packages</a> now.</p>
</span>
<span tal:condition="data/show_packages">
  <p>Select a package or more categories from below.</p>
  <table class="list">
  <tr><th>Package</th><th>Description</th></tr>
  <tr tal:repeat="package data/packages"
      tal:attributes="class repeat/package/parity">
    <td><a tal:attributes="href package/url" tal:content="package/name">package name</a></td>
    <td tal:content="package/summary">package summary</td>
  </tr>
  <tr><td id="last" colspan="2"></td></tr>
  </table>
</span>

<hr />

<!-- available categories -->
<div tal:repeat="category data/available_categories">
<strong tal:content="category/name"/><br/>

<tal:for-options repeat="subcategory category/subcategories">
<a tal:attributes="href subcategory/url">
 <span tal:replace="subcategory/name"/>
 (<span tal:replace="subcategory/packages_count"/>)</a>
<tal:if condition="not:repeat/subcategory/end"> / </tal:if>
</tal:for-options>

</div>

</metal:slot>
</html>
